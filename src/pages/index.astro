---
import { getCollection } from "astro:content";
import Footer from "../components/footer.astro";
import Navbar from "../components/navbar.astro";
import Layout from "../layouts/posinega.astro";

const personal_links = [
	{ href: "https://bsky.app/profile/azrd.dev", text: "bluesky" },
	{ href: "https://web.facebook.com/app.yaml", text: "facebook" },
	{ href: "https://github.com/azrdn", text: "github" },
	{ href: "mailto:hi+web@azrd.dev", text: "email" },
];

const collections = await Promise.all([
	getCollection("blog"),
	getCollection("blog_mdx"),
]);

const recent_posts = collections
	.flat()
	.sort((a, b) => b.data.createdAt.getTime() - a.data.createdAt.getTime())
	.slice(0, 3);

const ascii_art = `
       .    *          .                .                                       
   .                                .                      .     .         *    
       .         .          *                  .     *                  .       .
 .    *                      .      .                  .                     .  
              #######                                          *                
............###    #####.....................####................#####...........
:::::::::::##      ##$ ###::::::::::::::::###$#####::::::::::::##""$$####::::::::
~~~~~~~~~##         #$"" ###~~~~~~~~~~#####""$$##  ###--~~~~###   ""$"# ###~~~~~~
======###            $$""" ####===#####      "$$##   #######       $$" ##  ###===
%%%####              ##$$"""  #####             $$#   #####       $$ """###  ###%
###                   ##$$$"""   ###             $..       ###$$$$     "  ##    #
                       ###$$$      ####           #...                     ###   
                         ## $$        ##             ...                     #   
`;
---

<Layout title="azrd">
	<Navbar slot="header" />
	<pre>{ascii_art}</pre>
	<section>
		<h1>Hi, i'm azrd</h1>
		<p>
			Welcome to my humble website, feel free to explore as much as you
			want.
		</p>
		<p>
			I'm an amateur developer who likes topics about software. Currently
			enrolled in a university, learning about information systems.
		</p>
	</section>
	<section>
		<p>Here are some links where you can contact me:</p>
		<div id="_links">
			{personal_links.map((link) => <a href={link.href}>{link.text}</a>)}
		</div>
	</section>
	<hr />
	{recent_posts.length > 0 && (
		<section>
			<h1>Recent Blog Posts</h1>
			<ul>
				{recent_posts.map((post) => (
					<li><a href={`/blog/${post.id}`}>{post.data.title}</a></li>
				))}
			</ul>
		</section>
	)}
	<Footer slot="footer" />
</Layout>

<style>
	#_links {
		margin: 2em 0;
		display: flex;
		flex-wrap: wrap;
		column-gap: 3ch;
		row-gap: 1rlh;
	}

	pre {
		position: relative;
		font-family: inherit;
		line-height: 1;
		font-variant-ligatures: none;
		margin: 2rem 0;
		overflow: hidden;

		&::before {
			position: absolute;
			content: "";
			width: 100%;
			height: 100%;
			border: 2px solid var(--secondary);
		}

		@media (max-width: 900px) {
			font-size: 1.9vw;
		}
	}
</style>
